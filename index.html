<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load c3.css -->
<link href="c3.min.css" rel="stylesheet">

<style>
#chart{
  width: 98%;
  min-height: 800px;
}

body, .c3 {
    background-color: #0f75bc;   
}

.c3-axis-x path,
.c3-axis-x line,
.c3-axis-y path,
.c3-axis-y line {
    stroke: white;
}

.c3-axis-x g,
.c3-axis-y g,
.c3-legend-item-data text,
.c3-axis-y-label,
.c3-axis-x-label,
.c3-legend-item {
    fill: whitesmoke;
}
</style>

<!-- Load d3.js and c3.js -->
<script src="d3.min.js"></script>
<script src="c3.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<div id="chart" class="inverted"></div>

<script>
$.getJSON( "shodan-converted.json", function(json) {
    var fakeData = [];
    fakeData.push(json[0]);
    fakeData.push(json[1].map(function(i) { return 0; }));
    fakeData.push(json[2].map(function(i) { return 0; }));

    var chart = c3.generate({
        data: {
            x: 'x',
            type: 'bar',
            columns: fakeData,
            color: function(color, d) {
                return d.id === "Vulnerable" ? "#f37f31" : "#FFF";
            }
        },
        transition: {
            duration: 1000
        },
        grid: {
          x: {
            show: true
          },
          y: {
            show: true
          }
        },
        axis: {
            x: {
                type: 'category',
                tick: {
                    rotate: 90,
                    multiline: false
                }
            },
            y: {
                label: {
                    text: "Exposed Ports",
                    position: "outer-top"
                }
            }
        },
        bar: {
            width: {
                ratio: 0.75
            }
        }
    });
    
    setTimeout(function() { 
        chart.load({ 
            unload: true,
            columns: json
        }); 
    }, 100); 
    
    $("#chart").css({ minHeight: ($(window).innerHeight() * 0.98) + 'px' });
});
</script>